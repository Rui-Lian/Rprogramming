---
title: "Practical Machine Learning Project"
author: "lianrui"
date: "2017年9月28日"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Background
## Executive summary
## Getting the data

```{r, create data directory}
if (!file.exists("data")) {
    dir.create("data")
}
```


```{r, downloading data, echo=FALSE}
urlTrain <- "https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv"
urlTest <- "https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv"
download.file(urlTrain, destfile = "./data/pml-training.csv", method = "curl")
download.file(urlTest, destfile = "./data/pml-testing.csv", method = "curl")
```

Read data into R. 
```{r}
pmlTrain <- read.table("./data/pml-training.csv", header = TRUE, sep = ",")
dim(training)
pmlTest <- read.table("./data/pml-testing.csv", header = TRUE, sep = ",")

```








## creating dummy variables for factors 1, dummy first. 
```{r}
training.dmy <- model.matrix(classe ~ ., data = training)
dim(training.dmy)
```


## Removing the zero and near zero 1, dummy first
```{r}
nzv <- nearZeroVar(training.dmy)
?nearZeroVar
filteredTraining <- training.dmy[, -nzv]
dim(filteredTraining)
dim(training)
```

```{r}
trainCor <- cor(filteredTraining)
trainCor
highCorr <- sum(abs(trainCor[upper.tri(trainCor)]) > .999)
highCorr
?upper.tri
summary(trainCor[upper.tri(trainCor)])
```

